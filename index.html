<style>
  :root {
    --verde: #28a745;
    --verde-claro: #a9dfbf;
    --verde-hover: #218838;
    --gris-fondo: #f5f7f6;
    --gris-card: #ffffff;
    --gris-texto: #333333;
    --sombra: rgba(0, 0, 0, 0.08);
    --borde: #e1e1e1;
  }

  * { box-sizing: border-box; }

  body {
    margin: 0;
    font-family: 'Roboto', sans-serif;
    background-color: var(--gris-fondo);
    color: var(--gris-texto);
  }

  header {
    background-color: var(--verde);
    color: white;
    padding: 1rem 2rem;
    font-size: 1.8rem;
    text-align: center;
    font-weight: bold;
    box-shadow: 0 2px 4px var(--sombra);
    letter-spacing: 0.5px;
  }

  main {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    padding: 2rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  section {
    background-color: var(--gris-card);
    border-radius: 1rem;
    padding: 1.5rem;
    box-shadow: 0 8px 16px var(--sombra);
    transition: transform 0.2s, box-shadow 0.2s;
  }

  section:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 24px var(--sombra);
  }

  h2 {
    margin-top: 0;
    margin-bottom: 1rem;
    font-size: 1.4rem;
    color: var(--verde);
    display: flex;
    align-items: center;
    gap: 0.5rem;
    border-bottom: 2px solid var(--verde-claro);
    padding-bottom: 0.3rem;
  }

  input, select {
    width: 100%;
    padding: 0.8rem;
    margin-bottom: 1rem;
    border: 1px solid var(--borde);
    border-radius: 0.5rem;
    font-size: 1rem;
    background-color: #fafafa;
    transition: border-color 0.2s;
  }

  input:focus, select:focus {
    border-color: var(--verde);
    outline: none;
  }

  button {
    width: 100%;
    padding: 0.8rem;
    background-color: var(--verde);
    color: white;
    border: none;
    border-radius: 0.5rem;
    cursor: pointer;
    font-size: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: background-color 0.3s, transform 0.2s;
  }

  button:hover {
    background-color: var(--verde-hover);
    transform: translateY(-1px);
  }

  button:disabled {
    background-color: #cccccc;
    cursor: not-allowed;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.95rem;
    margin-top: 0.5rem;
  }

  th, td {
    border: 1px solid var(--borde);
    padding: 0.7rem;
    text-align: left;
  }

  th {
    background-color: var(--verde);
    color: white;
  }

  .total {
    text-align: right;
    font-weight: bold;
    margin-top: 1rem;
    font-size: 1.2rem;
    color: var(--verde);
  }

  ul {
    padding-left: 1rem;
  }

  li {
    margin-bottom: 0.5rem;
  }

  .fade-in {
    animation: fadeIn 0.4s ease-in;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  h2::before {
    content: 'üåø';
    font-size: 1.2rem;
  }
</style>
<body>
  <header>
    üåø Punto de Venta Verde Premium
  </header>
  <main>
    <section>
      <h2>üì¶ Inventario Disponible</h2>
      <table id="inventarioTabla">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Precio</th>
            <th>Stock (kg)</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <section>
      <h2>üõí Agregar al Carrito</h2>
      <select id="selectProducto"></select>
      <input type="number" id="peso" placeholder="Peso (kg)" min="0.01" step="0.01" />
      <button onclick="agregarAlCarrito()">‚ûï Agregar</button>
      <button onclick="simularBascula()">‚öñÔ∏è Simular B√°scula</button>
    </section>

    <section>
      <h2>üßæ Carrito Actual</h2>
      <table id="carritoTabla">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Peso</th>
            <th>Precio</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div class="total" id="total">Total: $0.00</div>
      <button onclick="finalizarVenta()">üí∞ Finalizar Venta</button>
    </section>

    <section>
      <h2>üìú Historial de Ventas</h2>
      <ul id="historial"></ul>
    </section>

    <section>
      <h2>‚ûï Agregar Producto al Inventario</h2>
      <input type="text" id="nuevoNombre" placeholder="Nombre del producto" />
      <input type="number" id="nuevoPrecio" placeholder="Precio por kg" step="0.01" />
      <input type="number" id="nuevoStock" placeholder="Stock inicial (kg)" step="0.01" />
      <button onclick="agregarProductoInventario()">‚úÖ Guardar Producto</button>
    </section>
  </main>
<script>
  let inventario = [];
  let carrito = [];
  let historial = [];

  function guardarLocal() {
    localStorage.setItem('pos_inventario', JSON.stringify(inventario));
    localStorage.setItem('pos_historial', JSON.stringify(historial));
  }

  function cargarLocal() {
    const inv = localStorage.getItem('pos_inventario');
    const hist = localStorage.getItem('pos_historial');

    if (inv) {
      inventario = JSON.parse(inv);
    } else {
      inventario = [
        { nombre: "Manzana", precio: 3.5, stock: 50 },
        { nombre: "Pl√°tano", precio: 2.0, stock: 40 },
        { nombre: "Carne", precio: 10.0, stock: 30 }
      ];
    }

    historial = hist ? JSON.parse(hist) : [];
  }

  function actualizarInventario() {
    const tbody = document.querySelector('#inventarioTabla tbody');
    const select = document.getElementById('selectProducto');
    tbody.innerHTML = '';
    select.innerHTML = '';

    inventario.forEach(item => {
      tbody.insertAdjacentHTML('beforeend', `
        <tr>
          <td>${item.nombre}</td>
          <td>$${item.precio.toFixed(2)}</td>
          <td>${item.stock.toFixed(2)} kg</td>
        </tr>
      `);
      const option = document.createElement('option');
      option.value = item.nombre;
      option.textContent = `${item.nombre} - $${item.precio.toFixed(2)}/kg`;
      select.appendChild(option);
    });
  }

  function agregarAlCarrito() {
    const nombre = document.getElementById('selectProducto').value;
    const peso = parseFloat(document.getElementById('peso').value);

    if (!nombre || isNaN(peso) || peso <= 0) {
      alert('Por favor, completa los campos correctamente.');
      return;
    }

    const producto = inventario.find(p => p.nombre === nombre);
    if (!producto || producto.stock < peso) {
      alert('Stock insuficiente.');
      return;
    }

    producto.stock -= peso;
    const subtotal = producto.precio * peso;
    carrito.push({ nombre, precio: producto.precio, peso, subtotal });

    actualizarInventario();
    actualizarCarrito();
    guardarLocal();
    document.getElementById('peso').value = '';
  }

  function actualizarCarrito() {
    const tbody = document.querySelector('#carritoTabla tbody');
    tbody.innerHTML = '';

    let total = 0;
    carrito.forEach(item => {
      total += item.subtotal;
      tbody.insertAdjacentHTML('beforeend', `
        <tr class="fade-in">
          <td>${item.nombre}</td>
          <td>${item.peso.toFixed(2)} kg</td>
          <td>$${item.precio.toFixed(2)}</td>
          <td>$${item.subtotal.toFixed(2)}</td>
        </tr>
      `);
    });

    document.getElementById('total').textContent = `Total: $${total.toFixed(2)}`;
  }

  function finalizarVenta() {
    if (carrito.length === 0) {
      alert('El carrito est√° vac√≠o.');
      return;
    }

    const totalVenta = carrito.reduce((sum, item) => sum + item.subtotal, 0);
    const venta = {
      fecha: new Date().toLocaleString(),
      total: totalVenta.toFixed(2),
      items: carrito.slice()
    };

    historial.push(venta);
    carrito = [];
    actualizarCarrito();
    mostrarHistorial();
    guardarLocal();

    alert(`‚úÖ Venta completada por $${totalVenta.toFixed(2)}`);
  }

  function mostrarHistorial() {
    const historialUl = document.getElementById('historial');
    historialUl.innerHTML = '';
    historial.forEach(v => {
      const li = document.createElement('li');
      li.textContent = `${v.fecha} - Total: $${v.total}`;
      historialUl.appendChild(li);
    });
  }

  function agregarProductoInventario() {
    const nombre = document.getElementById('nuevoNombre').value.trim();
    const precio = parseFloat(document.getElementById('nuevoPrecio').value);
    const stock = parseFloat(document.getElementById('nuevoStock').value);

    if (!nombre || isNaN(precio) || precio <= 0 || isNaN(stock) || stock <= 0) {
      alert('Completa todos los campos correctamente.');
      return;
    }

    inventario.push({ nombre, precio, stock });
    guardarLocal();
    actualizarInventario();

    document.getElementById('nuevoNombre').value = '';
    document.getElementById('nuevoPrecio').value = '';
    document.getElementById('nuevoStock').value = '';
    alert(`‚úÖ Producto "${nombre}" agregado al inventario.`);
  }

  function simularBascula() {
    const pesoAleatorio = (Math.random() * 5 + 0.2).toFixed(2);
    document.getElementById('peso').value = pesoAleatorio;
    alert(`‚öñÔ∏è B√°scula simula: ${pesoAleatorio} kg`);
  }

  cargarLocal();
  actualizarInventario();
  mostrarHistorial();
</script>
</body>
</html>
